<!-- VII.04. Basic template for edit page: (to make it easier we are copying the new template)-->
<!-- IX.02. Adding layout to ejs: (NOTE: This is how we are passing this file through and use it in boilerplate as "body") -->
<% layout('layouts/boilerplate') %>
<!--    * COMMENTING OUT CODE BELOW *   -->
<!-- <!DOCTYPE html> -->
<!-- <html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Campground</title>
</head>
<body> -->
    <!-- <h1>Edit Campground</h1> -->
    <!-- VII.05. Changing the action to the id's, and the method -->
    <!-- AFTER: Here comes method override that we have to require in app.js (VII.07.) (NOTE: We install it first) -->
    <!-- <form action="/campgrounds/< campground._id %>?_method=PUT" method="POST"> -->
        <!-- VII.06. We have to prepopulate the value for the title and location -->
        <!-- <div>
            <label for="title">Title</label>
            <input type="text" name="campground[title] " id="title" value="< campground.title %>">
        </div>
        <div>
            <label for="location">Location</label>
            <input type="text" name="campground[location]" id="location" value="< campground.location %>">
        </div>
        <button>Update  Campground</button>
    </form>
    <a href="/campgrounds/< campground._id %>"><button>Back to campground</button></a> -->
<!-- </body>
</html> -->

<!-- XVIII.06. Adding bootsrap validators: -->
<!-- NOTE: NOTE: "novalidation" and class="validated-form" into form, and "required" for all inputs, plus a <div class="valid-feedback" for each sections (divs) -->
<!--                XVI. STYLING EDIT TEMPLATE -->

<!-- XVI.01. Adding bootstrap to our form (NOTE: We are copying the form, from new.ejs) -->
<!-- NOTE: We are upgrading the previous one (if you don't get something read the notes above!) -->
<div class="row">
    <h1 class="text-center">Edit Campground</h1>
        <div class="col-md-6 offset-md-3">
            <!--                LXXII. ADDING UPLOAD TO EDIT PAGE  -->
            <!-- LXXII.01. First we're adding enctype="multipart/form-data" to the form -->
            <!-- AFTER: We have to add upload.array('image') middleware to PUT route in routes/campgrounds.js (LXXII.02) -->
            <form action="/campgrounds/<%= campground._id %>?_method=PUT" method="POST" class="validated-form" novalidate enctype="multipart/form-data">
                <div class="mb-3">
                    <label class="form-label" for="title">Title</label>
                    <!-- NOTE: the input name is grouped under "campground" (everything in the request body is going to be stored in campground ) -->
                    <input class="form-control" type="text" name="campground[title]" id="title" value="<%= campground.title %>" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="location">Location</label>
                    <input class="form-control" type="text" name="campground[location]" id="location" value="<%= campground.location %>" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <!-- LXXII. COMMENTING OUT -->
                <!-- <div class="mb-3">
                    <label class="form-label" for="image">Image Url</label>
                    <input class="form-control" type="text" name="campground[image]" id="image" value="<= campground.image %>" required>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div> -->
                <!-- LXXII.03. Updating images in the form: (NOTE: COMMENT OUT OLD ABOVE) -->
                <!-- NOTE: name in input has to match with the name in the previous middleware ('image ') -->
                <!-- AFTER: Now we have access to req.files, so we have to add images to controllers/campgrounds.js PUT route (LXXII.04.) -->
                <!-- LXXIII.04. COMMENTING OUT OLD IMAGE INPUT -->
                <!-- <div class="mb-3">
                    <label class="form-label" for="image">Add Images</label>
                    <input type="file" name="image" id="image" multiple>
                </div> -->
                <div class="mb-3">
                    <label class="form-label" for="price">Campground Price</label>
                    <div class="input-group">
                        <span class="input-group-text" id="price-label">$</span>
                        <input type="text" class="form-control" id="price" placeholder="0.00" aria-label="price"
                            aria-describedby="price-label" name="campground[price]" value="<%= campground.price %>" required>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="description">Description</label>
                    <textarea Url class="form-control" type="text" name="campground[description]" id="description" required><%= campground.description %></textarea>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <!-- LXXIII.04. Updating image input: (NOTE: Customizing file input) - COMMENT OUT THE OLD IMAGE INPUT - -->
                <div class="mb-3">
                    <label for="formFileMultiple" class="form-label">Add More Images</label>
                    <input type="file" class="form-control" id="formFileMultiple" name="image" multiple>
                    <div class="invalid-feedback">
                        This campground would look much better with a picture.
                    </div>
                </div>
                <!--                    LXXIV. DELETING IMAGES FORM                 -->
                <!-- LXXIV.01. We're creating  -->
                <div class="mb-3">
                    <!-- LXXIV.02. Here we can loop over (with forEach) our images: (NOTE: Inside we'll just render them)-->
                    <% campground.images.forEach(function(img, i) { %>
                        <!-- LXXVI. COMMENTING OUT img -->
                        <!-- NOTE: We can use bootstrap thumbnail class to give a constant size for the images  -->
                        <!-- <img src="<= img.url %>" class="img-thumbnail" alt=""> -->
                        <!-- LXXVI.04. Updating the image soure to "img.thumbnail" (COMMENT OUT CODE ABOVE)-->
                        <!-- NOTE: thumbnail is the virtual property we created for fixing size -->
                        <img src="<%= img.thumbnail %>" class="img-thumbnail" alt="">
                        <!-- LXXIV.03. We add a bootstrap checkbox: (NOTE: For selecting deleted images) -->
                        <div class="form-check-inline">
                            <!-- NOTE: We have to have an id for each checkbox that contains the index (i) -->
                            <!-- LXXIV.04. We have to associate the input with the image (with name and value)-->
                            <!-- AFTER: We have to add Joi validation too for that in schemas.js (LXXIV.05.) -->
                            <!-- NOTE: We're using the filename to delete it from cloudinary! -->
                            <input type="checkbox" id="image-<%= i %>" name="deleteImages[]" value="<%= img.filename %>">
                        </div>
                        <!-- LXXIV. We have to set the for in label equal to the input id above -->
                        <label for="image-<%= i %>">Delete?</label>
                    <% }) %> 
                </div>
                <div class="mb-3">
                    <button class="btn btn-info">Update Campground</button>
                </div>
            </form>
            <a href="/campgrounds/<%= campground._id %>"><button>Back to Campground</button></a>
        </div>
</div>






